import{Hb as j,L as c,Q as u,i as o,p as v,q as m}from"./chunk-OGUV6WFO.js";var n=class s{http=u(j);url="assets/data/toys.json";toysSubject$=new o([]);toys$=this.toysSubject$.asObservable();getToys(){this.http.get(this.url).subscribe(e=>{this.toysSubject$.next(e)})}static \u0275fac=function(r){return new(r||s)};static \u0275prov=c({token:s,factory:s.\u0275fac,providedIn:"root"})};var b=class s{saveToLocalStorage(e,r){return localStorage.setItem(e,r)}getFromLocalStorage(e){let r=localStorage.getItem(e);return r?JSON.parse(r):null}static \u0275fac=function(r){return new(r||s)};static \u0275prov=c({token:s,factory:s.\u0275fac,providedIn:"root"})};var f=class s{localStorageService=u(b);toysService=u(n);searchValueSubject$=new o("");searchValue$=this.searchValueSubject$.asObservable();selectValueSubject$=new o("");selectValue$=this.selectValueSubject$.asObservable();shapeValuesSubject$=new o([]);shapeValues$=this.shapeValuesSubject$.asObservable();colorValuesSubject$=new o([]);colorValues$=this.colorValuesSubject$.asObservable();sizeValuesSubject$=new o([]);sizeValues$=this.sizeValuesSubject$.asObservable();checkboxValueSubject$=new o(null);checkboxValue$=this.checkboxValueSubject$.asObservable();yearValuesSubject$=new o([]);yearValues$=this.yearValuesSubject$.asObservable();savedFiltersSubject$=new o("");savedfilters$=this.savedFiltersSubject$.asObservable();constructor(){this.loadFromLocalStorage()}filterByShape(e){this.shapeValuesSubject$.next(e),this.saveToStorage("shape",e)}filterByColor(e){this.colorValuesSubject$.next(e),this.saveToStorage("color",e)}filterBySize(e){this.sizeValuesSubject$.next(e),this.saveToStorage("size",e)}filterByFavourite(e){this.checkboxValueSubject$.next(e),this.saveToStorage("favourite",e)}filterByYear(e){this.yearValuesSubject$.next(e),this.saveToStorage("year",e)}sortToys(e){this.selectValueSubject$.next(e),this.saveToStorage("selectValue",e)}searchToys(e){this.searchValueSubject$.next(e),this.saveToStorage("searchValue",e)}filteredToys$=m(this.toysService.toys$,this.searchValue$,this.selectValue$,this.shapeValues$,this.colorValues$,this.sizeValues$,this.checkboxValue$,this.yearValues$).pipe(v(([e,r,l,S,h,p,d,g])=>{let t=[...e];if(S.length>0&&(t=t.filter(a=>S.includes(a.shape))),h.length>0&&(t=t.filter(a=>h.includes(a.color))),p.length>0&&(t=t.filter(a=>p.includes(a.size))),d&&(t=t.filter(a=>a.favorite)),g.length>0&&(t=t.filter(a=>g.includes(a.year))),l)switch(l){case"name-asc":t=[...t].sort((a,i)=>a.name.localeCompare(i.name));break;case"name-all":break;case"name-desc":t=[...t].sort((a,i)=>i.name.localeCompare(a.name));break;case"count-asc":t=[...t].sort((a,i)=>Number(a.count)-Number(i.count));break;case"count-desc":t=[...t].sort((a,i)=>Number(i.count)-Number(a.count));break;default:break}return r&&(t=t.filter(a=>a.name.toLowerCase().includes(r.toLowerCase()))),t}));loadFromLocalStorage(){this.getFromStorageAndUpdateSubject(this.shapeValuesSubject$,"shape"),this.getFromStorageAndUpdateSubject(this.colorValuesSubject$,"color"),this.getFromStorageAndUpdateSubject(this.sizeValuesSubject$,"size"),this.getFromStorageAndUpdateSubject(this.checkboxValueSubject$,"favourite"),this.getFromStorageAndUpdateSubject(this.yearValuesSubject$,"year"),this.getFromStorageAndUpdateSubject(this.selectValueSubject$,"selectValue"),this.getFromStorageAndUpdateSubject(this.searchValueSubject$,"searchValue")}saveToStorage(e,r){this.localStorageService.saveToLocalStorage(e,JSON.stringify(r))}getFromStorageAndUpdateSubject(e,r){let l=this.localStorageService.getFromLocalStorage(r);Array.isArray(l)&&e.next(l)}resetFilters(){this.shapeValuesSubject$.next([]),this.colorValuesSubject$.next([]),this.sizeValuesSubject$.next([]),this.checkboxValueSubject$.next(null),this.yearValuesSubject$.next([]),this.selectValueSubject$.next(""),this.searchValueSubject$.next(""),localStorage.removeItem("shape"),localStorage.removeItem("color"),localStorage.removeItem("size"),localStorage.removeItem("year"),localStorage.removeItem("favourite"),localStorage.removeItem("selectValue"),localStorage.removeItem("searchValue")}static \u0275fac=function(r){return new(r||s)};static \u0275prov=c({token:s,factory:s.\u0275fac,providedIn:"root"})};export{n as a,f as b};
